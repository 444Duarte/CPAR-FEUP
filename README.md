# CPAR-FEUP

[Instructions](doc/CPAR_ex1.pdf)

##Compiling
##Prerequisites
* [GCC, the GNU Compiler Collection](https://gcc.gnu.org/)
* [PAPI](http://icl.utk.edu/papi/)

###Compile
```
    gcc matrixprod.cpp -O2 -lstdc++ -lpapi -fopenmp -o matrixprod 
```


##Results
###Test Machine
####System Specs
* __Processor__:Intel(R) Core(TM) i7-6700HQ CPU @ 2.60GHz 2.59GHz
* __RAM__:16.0 GB
* __Native OS__:Windows 10 64-bit

####Ambient
* __OS__: Lubuntu 16.10 64-bit emulated using VMware Workstation 12 Player
* __Number of cores available__: 4
    - With "Virtualize CPU Performance Counters"
* __RAM__:3072 MB 


###Exercise 1

| Language | Lines | Columns | Time (seconds) | Result                                                                                                        | L1 DCM      | L2 DCM       |
|----------|-------|---------|----------------|---------------------------------------------------------------------------------------------------------------|-------------|--------------|
| C++      | 600   | 600     | 0.442          | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | 245705939   | 45989280     |
| C++      | 1000  | 1000    | 3.182          | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | 1310776566  | 284360892    |
| C++      | 1400  | 1400    | 6.856          | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | 3533630320  | 1726785940   |
| C++      | 1800  | 1800    | 43.130         | 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 | 9923648923  | 12362871028  |
| C++      | 2200  | 2200    | 93.097         | 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 | 18904204751 | 31231870843  |
| C++      | 2600  | 2600    | 260.343        | 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 | 50700490008 | 114860172924 |
| C++      | 3000  | 3000    | 448.414        | 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 | 86286928932 | 198167531673 |
| Java     | 600   | 600     | 0.379953907    | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | -           | -            |
| Java     | 1000  | 1000    | 3.414137921    | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | -           | -            |
| Java     | 1400  | 1400    | 10.545934405   | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | -           | -            |
| Java     | 1800  | 1800    | 74.701534915   | 1620900 1620900 1620900 1620900 1620900 1620900 1620900 1620900 1620900 1620900                               | -           | -            |
| Java     | 2200  | 2200    | 169.40223858   | 2421100 2421100 2421100 2421100 2421100 2421100 2421100 2421100 2421100 2421100                               | -           | -            |
| Java     | 2600  | 2600    | 303.229170491  | 3381300 3381300 3381300 3381300 3381300 3381300 3381300 3381300 3381300 3381300                               | -           | -            |
| Java     | 3000  | 3000    | 480.991397112  | 4501500 4501500 4501500 4501500 4501500 4501500 4501500 4501500 4501500 4501500                               | -           | -            |

###Exercise 2
####600x600 to 3000x3000 (increments 400)

| Language | Lines | Columns | Time (seconds) | Result                                                                                                        | L1 DCM     | L2 DCM     |
|----------|-------|---------|----------------|---------------------------------------------------------------------------------------------------------------|------------|------------|
| C++      | 600   | 600     | 0.789          | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | 28201278   | 62801090   |
| C++      | 1000  | 1000    | 0.812          | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | 129344397  | 264177556  |
| C++      | 1400  | 1400    | 2.382          | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | 356880114  | 717719028  |
| C++      | 1800  | 1800    | 5.264          | 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 | 795132399  | 1531969745 |
| C++      | 2200  | 2200    | 9.856          | 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 | 2187010572 | 2764456582 |
| C++      | 2600  | 2600    | 16.087         | 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 | 4460226209 | 4491927395 |
| C++      | 3000  | 3000    | 23.437         | 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 | 6832972504 | 6843859306 |
| Java     | 600   | 600     | 0.221115913    | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | -          | -          |
| Java     | 1000  | 1000    | 1.023655557    | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | -          | -          |
| Java     | 1400  | 1400    | 2.720531016    | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | -          | -          |
| Java     | 1800  | 1800    | 5.720939922    | 1620900 1620900 1620900 1620900 1620900 1620900 1620900 1620900 1620900 1620900                               | -          | -          |
| Java     | 2200  | 2200    | 10.585751775   | 2421100 2421100 2421100 2421100 2421100 2421100 2421100 2421100 2421100 2421100                               | -          | -          |
| Java     | 2600  | 2600    | 20.659955488   | 3381300 3381300 3381300 3381300 3381300 3381300 3381300 3381300 3381300 3381300                               | -          | -          |
| Java     | 3000  | 3000    | 27.224210437   | 4501500 4501500 4501500 4501500 4501500 4501500 4501500 4501500 4501500 4501500                               | -          | -          |



####4000x4000 to 10000x10000 (increments 2000)

| Language | Lines | Columns | Time (seconds) | Result                                                                                                        | L1 DCM      | L2 DCM      |
|----------|-------|---------|----------------|---------------------------------------------------------------------------------------------------------------|-------------|-------------|
| C++      | 4000  | 4000    | 240.562        | 8.002e+06 8.002e+06 8.002e+06 8.002e+06 8.002e+06 8.002e+06 8.002e+06 8.002e+06 8.002e+06 8.002e+06           | 16154430655 | 18486099979 |
| C++      | 6000  | 6000    | 794.667        | 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 1.8003e+07 | 54586272255 | 64360460770 |
| C++      | 8000  | 8000    | 1876.256       | 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 3.2004e+07 |             |             |
| C++      | 10000 | 10000   |                |                                                                                                               |             |             |
| Java     | 4000  | 4000    | 74.958529341   | 8002000 8002000 8002000 8002000 8002000 8002000 8002000 8002000 8002000 8002000                               | -           | -           |
| Java     | 6000  | 6000    | -----------    | Unable to do test: Java Heap space error (not enough memory to do test)                                       | -           | -           |

###Exercise 3
####Normal Matrix Multiplication

####Line Multiplication
| Threads | Lines | Columns | Time (seconds) | Result                                                                                                        | L1 DCM     | L2 DCM     |
|---------|-------|---------|----------------|---------------------------------------------------------------------------------------------------------------|------------|------------|
| 1       | 600   | 600     | 0.701          | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | 28155851   | 62806742   |
| 1       | 1000  | 1000    | 0.836          | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | 126962929  | 256341973  |
| 1       | 1400  | 1400    | 2.345          | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | 352058448  | 708653011  |
| 1       | 1800  | 1800    | 4.956          | 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 | 763978112  | 1498772308 |
| 1       | 2200  | 2200    | 9.277          | 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 | 2089657443 | 2691922926 |
| 1       | 2600  | 2600    | 15.184         | 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 | 4399120729 | 4496924697 |
| 1       | 3000  | 3000    | 23.520         | 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 | 6765144156 | 6872052719 |
| 2       | 600   | 600     | 0.722          | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | 13930983   | 29954613   |
| 2       | 1000  | 1000    | 2.034          | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | 63446845   | 129465769  |
| 2       | 1400  | 1400    | 5.585          | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | 175673388  | 354602336  |
| 2       | 1800  | 1800    | 11.989         | 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 | 383529931  | 748132669  |
| 2       | 2200  | 2200    | 21.905         | 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 | 1045933073 | 1359558889 |
| 2       | 2600  | 2600    | 36.213         | 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 | 2200095277 | 2235069687 |
| 2       | 3000  | 3000    | 57.061         | 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 | 3383859284 | 3424184313 |
| 3       | 600   | 600     | 0.350          | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | 9255372    | 19870823   |
| 3       | 1000  | 1000    | 1.685          | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | 42946747   | 86877098   |
| 3       | 1400  | 1400    | 4.638          | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | 126130738  | 238711331  |
| 3       | 1800  | 1800    | 9.780          | 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 | 261695834  | 499034226  |
| 3       | 2200  | 2200    | 17.886         | 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 | 703208837  | 892533647  |
| 3       | 2600  | 2600    | 30.861         | 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 | 1468250307 | 1470635213 |
| 3       | 3000  | 3000    | 86.667         | 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 | 2264756023 | 2543679918 |
| 4       | 600   | 600     | 0.462          | 180300 180300 180300 180300 180300 180300 180300 180300 180300 180300                                         | 6929614    | 14915177   |
| 4       | 1000  | 1000    | 2.053          | 500500 500500 500500 500500 500500 500500 500500 500500 500500 500500                                         | 32150353   | 67302602   |
| 4       | 1400  | 1400    | 5.822          | 980700 980700 980700 980700 980700 980700 980700 980700 980700 980700                                         | 92389279   | 170984723  |
| 4       | 1800  | 1800    | 12.244         | 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 1.6209e+06 | 220187170  | 379436438  |
| 4       | 2200  | 2200    | 22.847         | 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 2.4211e+06 | 555314390  | 671747389  |
| 4       | 2600  | 2600    | 37.429         | 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 3.3813e+06 | 1101556792 | 1100832232 |
| 4       | 3000  | 3000    | 59.710         | 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 4.5015e+06 | 1693914279 | 1712132376 |
